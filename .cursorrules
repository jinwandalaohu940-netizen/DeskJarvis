# DeskJarvis 项目规则

> 这是 Cursor AI 的项目规则文件，确保AI理解项目上下文和约束。

## 项目概述
DeskJarvis 是一个AI Agent桌面应用，使用自然语言控制电脑执行任务（浏览器操作、文件下载/整理等）。

## 技术栈（固定，不可随意更改）
- 前端：Tauri (Rust) + React + TypeScript + Tailwind CSS
- 后端：Python 3.11+ + LangGraph/CrewAI
- 浏览器：Playwright
- AI模型：Claude API (Anthropic)
- 通信：Tauri Shell Command（子进程调用Python）

## 核心原则
1. **不干扰**：浏览器操作在独立headless实例中执行
2. **安全沙盒**：文件操作限制在用户指定目录
3. **可追溯**：所有操作记录日志
4. **模块化**：每个功能独立，可单独测试

## 代码规范
- Python：类型提示、PEP 8、Google风格docstring、使用logging
- TypeScript：严格模式、函数类型、函数式组件+Hooks
- Rust：文档注释、Result错误处理、snake_case命名

## 文档体系
- `docs/ARCHITECTURE.md` - 架构设计（必须遵循）
- `docs/DEVELOPMENT.md` - 开发规范（必须遵循）
- `docs/DECISIONS.md` - 技术决策记录（参考）
- `docs/AI_WORKFLOW.md` - AI工作流指南（参考）

## 重要约束
1. 所有代码必须符合架构文档
2. 所有函数必须有类型提示和docstring
3. 所有操作必须有错误处理和日志
4. 技术决策变更必须先更新DECISIONS.md

## 目录结构
```
DeskJarvis/
├── src-tauri/          # Tauri Rust后端
├── src/                # React前端
├── agent/              # Python Agent核心
│   ├── planner/       # AI规划模块
│   ├── executor/      # 执行模块
│   └── tools/         # 工具函数
├── docs/               # 项目文档
└── tests/              # 测试
```

## 开发流程
1. 开始前：阅读架构文档和开发规范
2. 开发时：遵循代码规范，保持模块化
3. 完成后：更新文档，添加测试

## 错误处理
- 使用自定义异常类（DeskJarvisError及其子类）
- 错误必须记录日志
- 向用户返回明确的错误信息

## 日志规范
- 使用logging模块
- JSON格式存储
- 级别：DEBUG/INFO/WARNING/ERROR

## 当遇到不一致时
如果生成的代码与现有代码不一致：
1. 停止使用不一致的代码
2. 对比架构文档和现有代码
3. 要求AI修正或手动调整
4. 更新相关文档
